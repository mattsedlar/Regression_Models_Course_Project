---
title: "Is an Automatic or Manual Transmission Better for Miles per Gallon?"
author: "Matthew Sedlar"
date: "October 19, 2015"
output: 
  pdf_document: default
  html_document:
    keep_md: yes
---

## Executive Summary

## Exploratory Analysis

I started by looking at simple box plot of miles per gallon by automatic and manual transmission types. As figure 1 shows, the interquartile range for automatic transmissions is below the interquartile range of manual transmissions. There certainly appears to be a relationship between better mpg and manual transmissions.

#### Figure 1

```{r echo=FALSE, message=FALSE, fig.height=3, fig.width=4.5, fig.align='center'}

library(ggplot2)
library(gridExtra)

# calling up and cloning data set for analysis
# converting am variable to factor
data(mtcars)
analysis <- mtcars
analysis$am <- sapply(analysis$am, function(x) ifelse(x==0, "automatic","manual"))

p <- ggplot(analysis) + geom_boxplot(aes(x=am,y=mpg)) +
  xlab("Transmission Type") +
  ylab("Miles per Gallon (U.S.)") +
  ggtitle("Miles per Gallon by Transmission Type")
p

```

While the difference between the average mpg for the transmission types is statistically significant (see Appendix A), a simple categorical variable cannot fully explain _why_ there is a difference. We have to explore other variables that can help explain why.

There are several candidates to choose from, including weight, number of cylinders, horsepower, displacement, and number of carburetors (see Appendix B). Several of these variables have something in common: the size of the car and power of the engine. For this report, I'm going to look at displacement, which represents both the size and power of the engine and shares a strong positive correlation with both weight and horsepower (see Appendix C).

## Fitting a Model

## Hypothesis Testing

## Conclusion

---

# Appendix

### A: Automatic vs. Manual Hypothesis Testing

$$H_0: \bar{X} = \bar{Y}$$
$$H_1: \bar{X} \neq \bar{Y}$$

```{r}
transa <- subset(analysis,am=="automatic") 
transm <- subset(analysis,am=="manual")

t.test(transa$mpg,transm$mpg)
```

### B: Independent Variables by MPG, Faceted by Transmission Type

```{r echo=FALSE}
p.wt <- ggplot(analysis) + geom_point(aes(x=wt,y=mpg)) + facet_grid(.~am) +
  xlab("weight")

p.cyl <- ggplot(analysis) + geom_point(aes(x=cyl,y=mpg)) + facet_grid(.~am) +
  xlab("number of cylinders")

p.hp <- ggplot(analysis) + geom_point(aes(x=hp,y=mpg)) + facet_grid(.~am) +
  xlab("horsepower")

p.disp <- ggplot(analysis) + geom_point(aes(x=disp,y=mpg)) + facet_grid(.~am) +
  xlab("displacement")

p.carb <- ggplot(analysis) + geom_point(aes(x=carb,y=mpg)) + facet_grid(.~am) +
  xlab("number of carburetors")

grid.arrange(p.wt,p.cyl,p.hp, p.disp,p.carb,ncol=3,nrow=2)
```

### C: Displacement and its Correlation to Weight, Horsepower

Displacement is the volume of an engine's cylinders, a general indicator of its size and power. Since it's safe to assume that large, powerful engines would not be commonplace in smaller cars -- such modifications would be outliers -- I found a strong, positive correlation (`r cor(analysis$disp,analysis$wt)`) between weight and displacement. There's a similar, although less strong (`r cor(analysis$disp,analysis$hp)`), correlation between horsepower (*definition here*) and displacement.

```{r echo=FALSE, message=FALSE, fig.height=3, fig.width=5, fig.align='center'}
p.dw <- ggplot(analysis,aes(x=disp,y=wt)) + 
  geom_point() +
  stat_smooth(method="lm") +
  xlab("Displacement") +
  ylab("Weight")
p.dh <- ggplot(analysis, aes(x=disp,y=hp)) +
  geom_point() +
  stat_smooth(method="lm") +
  xlab("Displacement") +
  ylab("Horespower")

grid.arrange(p.dw,p.dh,ncol=2,nrow=1, top="Testing Correlations Between Independent X Variables")
```
